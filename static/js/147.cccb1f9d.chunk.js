"use strict";(self.webpackChunkppgfrontend=self.webpackChunkppgfrontend||[]).push([[147],{4762:function(e,t,a){a(2791);var n=a(6153),r=a(7988),s=a(8361),c=a(184);t.Z=function(e){return(0,c.jsxs)(n.Z,{children:[(0,c.jsx)(r.Z,{lg:"5",children:(0,c.jsx)(s.Z.Image,{})}),(0,c.jsx)(r.Z,{lg:"7",children:(0,c.jsx)(s.Z,{paragraph:{rows:6}})})]})}},5147:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var n=a(7762),r=a(5861),s=a(9439),c=a(7757),o=a.n(c),i=a(2791),l=a(9271),d=a(743),u=a(6153),m=a(7988),h=a(7299),p=a(6584),f=a(6592),x=a(6991),j=a(3424),Z=a(2683),g=a(4762),v=a(1815),b=a(4517),y=a(6919),k=a(4555),_=a(6038),N=a(981),S=a(2426),w=a.n(S),P=a(4245),C=a(3792),T=a(7063),F=a(184),I=function(e){var t=e.visible,a=e.paymentid,n=e.ordername;return(0,F.jsx)(C.Z,{visible:t,okText:"Ok",destroyOnClose:!0,footer:!1,centered:!0,onCancel:function(){return window.location.reload(!0)},width:"600px",children:(0,F.jsx)(T.ZP,{status:"success",title:"Successfully Purchased ".concat(n),subTitle:"Your Order number: ".concat(a)})})},O=function(e){var t=e.visible,a=e.children,n=e.title,r=e.rules,s=e.handlemodal,c=e.width,o=e.hidefooter,i=e.closable;return(0,F.jsxs)(C.Z,{title:n,centered:!0,visible:t,width:c||"100%",destroyOnClose:!0,onOk:function(e){return s(e,!1)},onCancel:function(e){return s(e,!1)},cancelButtonProps:{hidden:!0},footer:o,closable:!i,maskClosable:!i,children:[r&&(0,F.jsx)(h.ZP,{content:r}),a]})},B=a(2937),E=function(e){var t=e.show;return(0,F.jsx)(F.Fragment,{children:t&&(0,F.jsx)("div",{className:"loader",children:(0,F.jsx)(B.Z,{color:"light"})})})},z=function(e){var t=e.material,a=e.price,n=e.samagriprice,c=e.samagristatus,d=e.packageid,h=e.packagedata,p=sessionStorage.getItem("Authtoken"),f=(0,i.useState)([]),x=(0,s.Z)(f,2),j=x[0],g=x[1],S=(0,i.useState)(!1),C=(0,s.Z)(S,2),T=C[0],B=C[1],z=(0,i.useState)(""),A=(0,s.Z)(z,2),D=A[0],R=A[1],G=(0,i.useState)(!1),Y=(0,s.Z)(G,2),q=Y[0],J=Y[1],K=(0,i.useState)(""),L=(0,s.Z)(K,2),H=L[0],U=L[1],V=(0,i.useState)(""),M=(0,s.Z)(V,2),Q=M[0],W=M[1],X=(0,i.useState)(""),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ae=(0,i.useState)(""),ne=(0,s.Z)(ae,2),re=ne[0],se=ne[1],ce=(0,i.useState)(!1),oe=(0,s.Z)(ce,2),ie=oe[0],le=oe[1],de=(0,i.useState)(!0),ue=(0,s.Z)(de,2),me=ue[0],he=ue[1],pe=(0,l.k6)(),fe=(0,i.useCallback)((0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p){e.next=6;break}return e.next=4,Z.Z.GetProfileData();case 4:t=e.sent,me&&g(t.data.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[p,me]);function xe(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}(0,i.useEffect)((function(){return fe(),function(){fe(),he(!0)}}),[fe]);var je=function(){var e=(0,r.Z)(o().mark((function e(s){var i,l,u,m,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),J(!0),e.next=4,xe("https://checkout.razorpay.com/v1/checkout.js");case 4:if(e.sent){e.next=8;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 8:return i=c?parseInt(a)+parseInt(n):a,l={currency:"INR",receipt:t.name,payment_capture:1,amount:i},e.next=12,Z.Z.PurchaseItem(P.stringify(l));case 12:u=e.sent,m=u.data,p={key:"rzp_test_lTf2h44v9i9IK2",name:t.name,description:"Pooja Booking",order_id:m.id,prefill:{contact:j.phone,email:j.email,name:j.name},handler:function(){var e=(0,r.Z)(o().mark((function e(r){var s,l,u,m,p,f,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.razorpay_payment_id,e.next=4,Z.Z.FetchPayment(s);case 4:if(l=e.sent,u=JSON.parse(l.data),console.log(u),m=JSON.stringify({id:u.id,payment_id:s,amount:u.amount/100}),(p=t).package_data=h,"captured"!==u.status){e.next=21;break}return f={user:j,puja_id:t._id,package_id:d,puja_amount:i,samagri_status:c,samagri_amount:n,amount:a,puja_data:JSON.stringify(p),payment_id:s,payment_data:m,puja_date:Q,contact_name:re,contact_address:ee,contact_phone:H,status:"success"},console.log(f),e.next=15,Z.Z.BookPooja(P.stringify(f));case 15:return x=e.sent,console.log(x.data),200===x.data.status_code&&setTimeout((function(){J(!1),R(s),B(!0)}),3e3),e.abrupt("return",null);case 21:alert("Your Transaction Failed"),J(!1);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),theme:{color:"#e9963e"}},new window.Razorpay(p).open();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){return(0,F.jsx)(F.Fragment,{children:p?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(v.Z,{color:"amber",className:"btn-rounded shadow",onClick:ge,children:"Book Pooja"})}):(0,F.jsx)(_.Z,{title:"Before this You have to login First !",okText:"Login",placement:"bottomLeft",onConfirm:function(){return pe.push("/login")},children:(0,F.jsx)(v.Z,{color:"amber",className:"btn-rounded shadow",children:"Book Pooja"})})})},ge=function(){le(!ie)};return(0,F.jsxs)(F.Fragment,{children:[t.order_status?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("i",{className:"far fa-calendar-alt mr-1"})," Valid Till :"," ",t.order_data&&w()(t.order_data[0].to_date).format("ll")]}):(0,F.jsx)(Ze,{}),(0,F.jsx)(I,{visible:T,paymentid:D,ordername:t.name}),(0,F.jsx)(E,{show:q}),(0,F.jsx)(O,{visible:ie,width:"650px",title:"Enter Your address before purchase this",hidefooter:null,handlemodal:ge,children:(0,F.jsx)(b.Z,{onSubmit:je,children:(0,F.jsxs)(u.Z,{className:"justify-content-end",children:[(0,F.jsx)(m.Z,{lg:"6",children:(0,F.jsxs)(y.Z,{children:[(0,F.jsx)("label",{className:"form-control-label",htmlFor:"address",children:"Name"}),(0,F.jsx)(k.Z,{className:"form-control-alternative",id:"address",placeholder:"Enter your name",value:re,type:"text",required:!0,onChange:function(e){return se(e.target.value)}})]})}),(0,F.jsx)(m.Z,{lg:"6",children:(0,F.jsxs)(y.Z,{children:[(0,F.jsx)("label",{className:"form-control-label",htmlFor:"address",children:"Phone Number"}),(0,F.jsx)(k.Z,{className:"form-control-alternative",id:"address",placeholder:"Alternate Number",value:H,type:"text",required:!0,onChange:function(e){return U(e.target.value)}})]})}),(0,F.jsx)(m.Z,{lg:"12",children:(0,F.jsxs)(y.Z,{children:[(0,F.jsx)("label",{className:"form-control-label d-block",htmlFor:"address",children:"Select Pooja Date"}),(0,F.jsx)(N.Z,{onChange:function(e,t){W(t),console.log(t)},className:"w-100"})]})}),(0,F.jsx)(m.Z,{lg:"12",children:(0,F.jsxs)(y.Z,{children:[(0,F.jsx)("label",{className:"form-control-label",htmlFor:"address",children:"Address"}),(0,F.jsx)(k.Z,{className:"form-control-alternative",id:"address",placeholder:"City/Area/Locatlity",value:ee,type:"textarea",rows:"5",required:!0,onChange:function(e){return te(e.target.value)}})]})}),(0,F.jsx)(m.Z,{lg:"4",children:(0,F.jsx)(y.Z,{className:"mb-0",children:(0,F.jsx)(v.Z,{className:"py-2 btn-rounded text-white",color:"amber",type:"submit",block:!0,children:"Continue to proceed"})})})]})})})]})},A=function(e){var t=(0,i.useRef)(null),a=(0,i.useState)([]),c=(0,s.Z)(a,2),v=c[0],b=c[1],y=(0,i.useState)([]),k=(0,s.Z)(y,2),_=k[0],N=k[1],S=(0,i.useState)([]),w=(0,s.Z)(S,2),P=w[0],C=w[1],T=(0,i.useState)(""),I=(0,s.Z)(T,2),O=I[0],B=I[1],E=(0,i.useState)(""),A=(0,s.Z)(E,2),D=A[0],R=A[1],G=(0,i.useState)(!1),Y=(0,s.Z)(G,2),q=Y[0],J=Y[1],K=(0,i.useState)(""),L=(0,s.Z)(K,2),H=L[0],U=L[1],V=(0,i.useState)(""),M=(0,s.Z)(V,2),Q=M[0],W=M[1],X=(0,i.useState)([]),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ae=(0,i.useState)(!1),ne=(0,s.Z)(ae,2),re=ne[0],se=ne[1],ce=(0,i.useState)(!0),oe=(0,s.Z)(ce,2),ie=oe[0],le=oe[1],de=(0,l.UO)().id,ue=(0,l.TH)(),me=p.Z.TabPane;(0,i.useEffect)((function(){var e=function(){var e=(0,r.Z)(o().mark((function e(){var t,a,r,c,i,l,d,u,m,h,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.prev=1,e.next=4,Promise.all([Z.Z.GetPoojaById(de),Z.Z.GetPoojaPackagesByPoojaId(de)]);case 4:if(t=e.sent,a=(0,s.Z)(t,2),r=a[0],c=a[1],ie){if(b(r.data.data),N(c.data.data),"multiple"===r.data.data.package_type){i=[],l=c.data.data,d=l[0].price,u=l[0].samagri_price,m=l[0]._id,te(l[0]),B(d),R(u),W(m),U(l[0].title),h=(0,n.Z)(l);try{for(h.s();!(p=h.n()).done;)f=p.value,i.push({label:f.title,value:f.title})}catch(o){h.e(o)}finally{h.f()}C(i)}else B(r.data.data.price),W(r.data.data._id),R(r.data.data.samagri_price);se(!1)}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){e(),le(!1)}}),[de,ie]),(0,i.useEffect)((function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,t.current.scrollTop=0}),[ue]);return(0,F.jsxs)(j.Z,{children:[(0,F.jsx)(x.Z,{title:"Product details"}),(0,F.jsx)("div",{className:"product_details",ref:t,children:(0,F.jsx)(d.Z,{fluid:!0,children:re?(0,F.jsx)(g.Z,{}):(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(m.Z,{lg:"5",children:(0,F.jsx)("div",{className:"product_thumb",children:(0,F.jsx)("img",{src:v.image,className:"img-fluid shadow",alt:v.name,loading:"lazy"})})}),(0,F.jsx)(m.Z,{lg:"7",children:(0,F.jsxs)("div",{className:"product_desc",children:[(0,F.jsx)("h1",{children:v.name}),(0,F.jsx)(h.ZP,{content:v.short_description,tagName:"p"}),(0,F.jsx)("div",{className:"product_prices",children:(0,F.jsxs)("h3",{children:["\u20b9 ",O]})}),"multiple"===v.package_type&&(0,F.jsxs)("div",{className:"variants",children:[(0,F.jsx)("h5",{children:"Select Packages"}),(0,F.jsx)(f.ZP.Group,{options:P,value:H,optionType:"button",buttonStyle:"solid",onChange:function(e){var t=e.target.value;U(t);var a=_.find((function(e){return e.title===t}));a&&(console.log(a),te(a),W(a._id),B(a.price),R(a.samagri_price))}}),(0,F.jsxs)("div",{className:"variants_samagri",children:[(0,F.jsx)("h5",{children:"Samagri Price"}),(0,F.jsxs)("div",{className:"pricediv ".concat(q&&"active"),onClick:function(){J(!q)},children:["\u20b9 ",D]})]})]}),(0,F.jsx)(z,{material:v,price:O,samagriprice:D,samagristatus:q,packageid:Q,packagedata:ee})]})}),(0,F.jsx)(m.Z,{lg:"12",children:(0,F.jsx)("div",{className:"more_desc",children:(0,F.jsxs)(p.Z,{defaultActiveKey:"1",centered:!0,children:[(0,F.jsx)(me,{tab:"Description",children:(0,F.jsx)(h.ZP,{content:v.description,tagName:"div"})},"1"),(0,F.jsx)(me,{tab:"Review",children:"Content of Tab Pane 2"},"2")]})})})]})})})]})}}}]);
//# sourceMappingURL=147.cccb1f9d.chunk.js.map